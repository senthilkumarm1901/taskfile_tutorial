version: '3'

env: 
  LAMBDA_FUNCTION_NAME: 
    sh: basename $PWD
    # the above command picks up the folder name `hello_lambda`

  IAM_ROLE_ARN:
    sh: (cat ./supporting_files/iam_tasks/final_role_arn.txt | cut -d= -f2)

tasks:
  create_lambda_name:
    cmds:
      - zip -r ${LAMBDA_FUNCTION_NAME}.zip lambda_function.py
      - bash supporting_files/lambda_creation/ aws_cli_command_for_lambda_creation.bash $LAMBDA_FUNCTION_NAME $IAM_ROLE_ARN
    silent: false